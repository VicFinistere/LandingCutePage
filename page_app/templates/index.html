{% extends '/layouts/default.html' %}
{% block body %}
<div id="wrapper">

    <!-- Sidebar -->
    <ul class="sidebar navbar-nav">
        <li class="nav-item active">
            <a class="nav-link" href="index.html">
                <i class="fas fa-fw fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="pagesDropdown" role="button" data-toggle="dropdown"
               aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-fw fa-folder"></i>
                <span>Pages</span>
            </a>
            <div class="dropdown-menu" aria-labelledby="pagesDropdown">
                <h6 class="dropdown-header">Login Screens:</h6>
                <a class="dropdown-item" href="login.html">Login</a>
                <a class="dropdown-item" href="register.html">Register</a>
                <a class="dropdown-item" href="forgot-password.html">Forgot Password</a>
                <div class="dropdown-divider"></div>
                <h6 class="dropdown-header">Other Pages:</h6>
                <a class="dropdown-item" href="404.html">404 Page</a>
                <a class="dropdown-item" href="blank.html">Blank Page</a>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="charts.html">
                <i class="fas fa-fw fa-chart-area"></i>
                <span>Charts</span></a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('index') }}#accordion">
                <i class="fas fa-fw fa-table"></i>
                <span>Todo cards</span></a>
        </li>
    </ul>

    <div id="content-wrapper">

        <div class="container-fluid">

            <!-- Breadcrumbs-->
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="#">Dashboard</a>
                </li>
                <li class="breadcrumb-item active">Overview</li>
            </ol>

            <!-- Icon Cards-->
            <div class="row">
                <div class="col-xl-3 col-sm-6 mb-3">
                    <div class="card text-white bg-primary o-hidden h-100">
                        <div class="card-body">
                            <div class="card-body-icon">
                                <i class="fas fa-fw fa-cloud"></i>
                            </div>
                            <div class="mr-5">Weather data</div>
                        </div>
                        <a class="card-footer text-white clearfix small z-1" href="#">
                            <form class="list-inline-item" method="post" action="{{ url_for('update_weather') }}">
                                <button style="color:white;" type="submit" class="btn-primary">Refresh</button>
                            </form>
                            <span class="float-right">
                    <i class="fas fa-angle-right"></i>
                  </span>
                        </a>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 mb-3">
                    <div class="card text-white bg-success o-hidden h-100">
                        <div class="card-body">
                            <div class="card-body-icon">
                                <i class="fas fa-fw fa-comments"></i>
                            </div>
                            <div class="mr-5">{{ mail_counter }} mails in your box !</div>
                        </div>
                        <a class="card-footer text-white clearfix small z-1" href="#">
                            <form class="list-inline-item" method="post" action="{{ url_for('mail') }}">
                                <button style="color:white;" type="submit" class="btn-success">Check your mailbox</button>
                            </form>
                            <span class="float-right">
                    <i class="fas fa-angle-right"></i>
                  </span>
                        </a>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 mb-3">
                    <div class="card text-white bg-warning o-hidden h-100">
                        <div class="card-body">
                            <div class="card-body-icon">
                                <i class="fas fa-fw fa-shopping-cart"></i>
                            </div>
                            <div class="mr-5">123 New Orders!</div>
                        </div>
                        <a class="card-footer text-white clearfix small z-1" href="#">
                            <span class="float-left">View Details</span>
                            <span class="float-right">
                    <i class="fas fa-angle-right"></i>
                  </span>
                        </a>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 mb-3">
                    <div class="card text-white bg-danger o-hidden h-100">
                        <div class="card-body">
                            <div class="card-body-icon">
                                <i class="fas fa-fw fa-life-ring"></i>
                            </div>
                            <div class="mr-5">13 New Tickets!</div>
                        </div>
                        <a class="card-footer text-white clearfix small z-1" href="#">
                            <span class="float-left">View Details</span>
                            <span class="float-right">
                    <i class="fas fa-angle-right"></i>
                  </span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Show cities-->
            {% for weather in weather_data %}
            <ul class="list-inline">
                <li class="list-inline-item">
                    <form class="list-inline-item" method="post" action="{{ url_for('rm') }}">
                        <input type="hidden" name="deleted_city" value="{{weather.name}}">
                        <button type="submit"><i class="fas fa-times"></i></button>
                    </form>
                </li>
                <li class="list-inline-item">
                    {{ weather.name }}
                </li>
                <li class="list-inline-item">
                    <img src="http://openweathermap.org/img/w/{{ weather.icon }}.png" alt="Weather Image">
                </li>
                <li class="list-inline-item">
                    <span class="temperature">{{ weather.temperature }}° C</span>
                </li>
                <li class="list-inline-item">
                    {{ weather.description }}
                </li>
            </ul>
            <form class="list-inline-item" method="post" action="{{ url_for('city_map', city=weather.name )}}">
                <button type="submit" class="btn-default">Show this city</button>
            </form>
            <form class="list-inline-item" method="post" action="{{ url_for('geoloc_map') }}">
                <button type="submit" class="btn-default">Show my localisation</button>
            </form>
            {% endfor %}

            <div id="mapid"></div>
            <div id="accordion">
                {% for todo_list in todo_lists%}
                <div class="card">
                    <div class="card-header" id="heading{{loop.index}}">
                        <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#accordion{{loop.index}}"
                                    aria-expanded="true" aria-controls="accordion{{loop.index}}">
                                {{ todo_list.0 }}
                            </button>
                        </h5>
                    </div>

                    <div id="accordion{{loop.index}}" class="collapse" aria-labelledby="heading{{loop.index}}"
                         data-parent="#accordion">
                        <div class="card-body">
                            <ul>
                                {% for todo_card in todo_list.1%}
                                <li>{{ todo_card }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
        </div>

    </div>
    <!-- /.container-fluid -->

    <!-- Sticky Footer -->
    <footer class="sticky-footer">
        <div class="container my-auto">
            <div class="copyright text-center my-auto">
                <span>Copyright © Your Website 2018</span>
            </div>
        </div>
    </footer>

</div>
<!-- /.content-wrapper -->

</div>
<!-- /#wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                <a class="btn btn-primary" href="login.html">Logout</a>
            </div>
        </div>
    </div>
</div>

{% endblock body %}
